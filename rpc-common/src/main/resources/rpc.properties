#==============================
# RPC框架核心配置文件
#==============================

#---------- 基础配置 ----------
# 应用名称
rpc.application.name=java-rpc
# 应用所有者
rpc.application.owner=weihua
# 环境类型: dev, test, prod
rpc.environment=dev

#---------- 服务注册与发现 ----------
# 服务注册中心类型: consul, zookeeper, local
rpc.registry=consul
# Consul配置
rpc.registry.consul.host=localhost
rpc.registry.consul.port=8500
rpc.registry.consul.timeout=10000
# 服务健康检查间隔(秒)
rpc.registry.consul.check.interval=10
# 服务注册失效时间(秒)
rpc.registry.consul.deregister.time=90
# ZooKeeper配置
rpc.registry.zookeeper.address=127.0.0.1:2181
rpc.registry.zookeeper.session.timeout=40000

#---------- 负载均衡 ----------
# 负载均衡策略: consistentHash, random, roundRobin, leastActive
rpc.loadbalance=consistentHash
# 一致性哈希虚拟节点数
rpc.loadbalance.consistentHash.virtualNodes=160
# 一致性哈希算法选择: murmur3, md5, sha1
rpc.loadbalance.consistentHash.algorithm=murmur3

#---------- 序列化 ----------
# 序列化方式: json, hessian, protobuf, kryo
rpc.serializer=json

#---------- 网络传输 ----------
# 网络传输框架: netty
rpc.transport=netty
# 最大连接数
rpc.transport.maxConnections=16
# 请求超时时间(毫秒)
rpc.transport.timeout=5000
# 连接空闲超时时间(毫秒)
rpc.transport.idle.timeout=30000
# 心跳间隔(毫秒)
rpc.transport.heartbeat.interval=15000

#---------- 压缩 ----------
# 是否启用压缩
rpc.compress.enable=false
# 压缩算法: gzip, snappy
rpc.compress.type=gzip
# 启用压缩的阈值(字节)，超过此大小才进行压缩
rpc.compress.size.threshold=2048

#---------- 线程池 ----------
# IO线程池大小
rpc.threadpool.io.threads=4
# 业务线程池核心线程数
rpc.threadpool.core.size=10
# 业务线程池最大线程数
rpc.threadpool.max.size=100
# 业务线程池队列大小
rpc.threadpool.queue.size=1000
# 业务线程池线程保活时间(秒)
rpc.threadpool.keepalive.seconds=60

#---------- 容错 ----------
# 重试策略: failfast, failover, failsafe
rpc.cluster=failfast
# 最大重试次数
rpc.cluster.retries=2
# 是否启用熔断器
rpc.circuit.breaker.enable=true
# 熔断器错误阈值比例
rpc.circuit.breaker.error.threshold=50
# 熔断器最小请求数
rpc.circuit.breaker.request.threshold=20
# 熔断器重置时间窗口(毫秒)
rpc.circuit.breaker.sleep.window=5000

#---------- 限流降级 ----------
# 是否启用限流
rpc.ratelimit.enable=false
# 单机最大QPS
rpc.ratelimit.max.qps=1000

#---------- 监控 ----------
# 是否启用监控
rpc.monitor.enable=false
# 监控数据发送间隔(毫秒)
rpc.monitor.interval=60000
# 监控地址
rpc.monitor.address=localhost:7070

#---------- 日志追踪 ----------
# 是否启用分布式追踪
rpc.trace.enable=true
# 追踪类型: zipkin, jaeger
rpc.trace.type=zipkin
# Zipkin地址
rpc.trace.zipkin.baseUrl=http://localhost:9411/api/v2/spans
# 采样率(0-1.0)
rpc.trace.sample.rate=0.1

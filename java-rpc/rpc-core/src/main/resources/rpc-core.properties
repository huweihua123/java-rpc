#==============================
# RPC核心配置文件 - 共享配置
#==============================
# 所有模块共享的配置都放在这里

#---------- 应用信息 ----------
# 应用名称 (各模块可覆盖)
rpc.application.name=java-rpc
# 应用所有者
rpc.application.owner=weihua
# 应用环境: dev, test, staging, production
rpc.application.environment=dev

#---------- 服务注册与发现 ----------
# 服务注册中心类型: consul, zookeeper, local
rpc.registry=consul
# 注册中心地址
rpc.registry.address=127.0.0.1:8500
# 注册中心连接超时(毫秒)
rpc.registry.timeout=5000
# 注册中心重试次数
rpc.registry.retry.times=5
# 注册中心会话超时(毫秒)
rpc.registry.session.timeout=30000
# 注册中心会话保持间隔(毫秒)
rpc.registry.heartbeat=15000
# 是否开启服务发现缓存
rpc.registry.cache.enable=true

#---------- 负载均衡 ----------
# 负载均衡策略: consistentHash, random, roundRobin, leastActive
rpc.loadbalance=consistentHash

#---------- 序列化 ----------
# 序列化方式: json, hessian, protobuf, kryo
rpc.serializer=json
# 是否启用压缩
rpc.compression.enable=false
# 压缩算法: gzip, snappy, lz4
rpc.compression.algorithm=gzip
# 压缩阈值(字节)，超过此大小才压缩
rpc.compression.size.threshold=2048

#---------- 网络传输 ----------
# 请求超时时间(毫秒)
rpc.transport.timeout=5000
# 连接空闲超时时间(毫秒)
rpc.transport.idle.timeout=30000
# IO线程数
rpc.transport.io.threads=8
# 工作线程数
rpc.transport.worker.threads=200
# 客户端最大连接数
rpc.transport.max.connections=100
# 请求缓冲区大小(字节)
rpc.transport.buffer.size=8192
# 是否启用Nagle算法
rpc.transport.nagle.enable=false
# 连接保持活动状态
rpc.transport.keepalive=true
# 是否开启TCP_NODELAY
rpc.transport.tcp.nodelay=true

#---------- 熔断与限流 ----------
# 是否启用熔断器
rpc.circuit.breaker.enable=true
#熔断器开启条件：连续失败次数
rpc.circuit.breaker.failures=5
# 熔断器开启条件：错误率阈值(%)
rpc.circuit.breaker.error.rate=50
# 熔断时间窗口(毫秒)
rpc.circuit.breaker.window=10000
# 熔断恢复所需成功次数
rpc.circuit.breaker.success.threshold=3
# 是否启用限流
rpc.rate.limit.enable=true
# 全局限流QPS
rpc.rate.limit.qps=10000
# 限流容量
rpc.rate.limit.capacity=100

#---------- 重试策略 ----------
# 重试启用
rpc.retry.enable=true
# 最大重试次数
rpc.retry.max.times=3
# 重试间隔(毫秒)
rpc.retry.interval=1000
# 集群失败时的处理策略
rpc.cluster.failover.policy=retry

#---------- 日志追踪 ----------
# 是否启用分布式追踪
rpc.trace.enable=true
# 追踪类型: zipkin, jaeger
rpc.trace.type=zipkin
# 采样率(0-100)
rpc.trace.sample.rate=100
# 追踪服务器地址
rpc.trace.server.address=http://localhost:9411/api/v2/spans
# 是否记录异常
rpc.trace.record.exceptions=true
# 是否记录访问日志
rpc.access.log=true
